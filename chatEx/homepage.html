<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Home</title>
    <link href="bootstrap.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery-2.1.1.js"></script>
    <script type="text/javascript" src="bootstrap.js"></script>

</head>
<body>
     <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <strong style="color : white">GetInTouch</strong>
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Theme<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">default</a></li>
                            <li><a href="#">cerulean</a></li>
                            <li><a href="#">cyborg</a></li>
                        </ul>
                    </li>
		
                </ul>
                <form class="form-inline nav nav-pills pull-right" style="margin-top: 10px">
  		<input type="text" class="input-medium search-query" placeholder="Email">
  		<input type="password" class="input-medium search-query" placeholder="Password">
 		 <label class="checkbox">
    			<input type="checkbox"> Remember me
  		</label>
		 <button type="submit" class="btn btn-primary">Login</button>
		 <button type="submit" class="btn btn-primary">Register</button>
	      </form>
                  
                
            </div>
        </div>
    </div>
    <input id="kol" type="hidden" value="1"/> 
    <input id="nick" type="hidden" value="Mary"/> 
    <div class="container jumbotron" style="margin-top: 40px">
        <div class="row">
	<div class="col-md-2">
                 <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
            </div>
            <div class="col-md-4">
                <h4 >Mary Pavlovec</h4>
	   			<h5>16/04/1995</h5>
	   			<h5>Minsk</h5>
            </div>
        </div>
        <br>
        <br>
         <button type="button" class="btn btn-primary btn-success" id="state" onclick="changeState(false);">Server is available</button>
        <br>
        <div class="row">
        <div class=" col-lg-6 col-md-6 col-sm-6">
                <div class="chat-box-div">
                    <div class="chat-box-head">
                        GROUP CHAT HISTORY
                            <button type="button" class="btn btn-info dropdown-toggle pull-right" data-toggle="dropdown" aria-expanded="false"/>
                    </div>
                    <div class="panel-body chat-box-main" id="myChat">
                    	<div id="123">
	                        <div class="chat-box-left">
	                            Mimimimi
	                        <button class="btn pull-right" style="margin-top: -10px" onclick="deleteMessage(this.id);" id="123"><span class="glyphicon glyphicon-remove"></span></button>
	                        <button class="btn pull-right" style="margin-top: -10px" onclick="editMessage(this.id);" id="d123"><span class="glyphicon glyphicon-pencil"></span></button>
	                        </div>
	                        <div class="chat-box-name-left">
	                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
	                            12/04/2015 12:38 - Mary
	                        </div>
	                        <hr class="hr-clas" />
                        </div>
                        <div class="chat-box-right">
                            MURMURMUR
                        </div>
                        <div class="chat-box-name-right">
                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
                            12/04/2015 12:38 - Romin Royeelin
                        </div>
                        <hr class="hr-clas" />
                        <div id="1234">
                        <div class="chat-box-left">
                            Omnomnom
                              
                        <button class="btn pull-right" style="margin-top: -10px" onclick="deleteMessage(this.id);" id="1234"><span class="glyphicon glyphicon-remove"></span></button>
	                        <button class="btn pull-right" style="margin-top: -10px" onclick="editMessage(this.id);" id="d1234"><span class="glyphicon glyphicon-pencil"></span></button>
                        </div>
                        <div class="chat-box-name-left">
                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
                            12/04/2015 12:38 - Mary
                        </div>
                        <hr class="hr-clas" />
                        </div>
                        <div class="chat-box-right">
                            mrrrrrrrrrrrrrr
                        </div>
                        <div class="chat-box-name-right">
                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
                            12/04/2015 12:38- Romin Royeelin
                        </div>
                        <hr class="hr-clas" />
                    </div>
                    <div class="chat-box-footer">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Enter Text Here..." id="message">
                            <span class="input-group-btn">
                                <button onclick="sendClick();" class="btn btn-info" id="send">SEND</button>
                            </span>
                        </div>
                    </div>

                </div>

            </div>
            <div class="col-lg-3 col-md-3 col-sm-3">
                <div class="chat-box-online-div">
                    <div class="chat-box-online-head">
                        ONLINE USERS (120)
                    </div>
                    <div class="panel-body chat-box-online">
                        <hr class="hr-clas-low" />
                        <div class="chat-box-online-left">
                        <button class="btn">
                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
                            -  Justine Goliyad
                            <br />
                            </button>
                        </div>
                        <hr class="hr-clas-low" />

                        <div class="chat-box-online-right">
                        <button class="btn">
                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
                            -  Romin Royeelin
                            <br />
                            </button>
                        </div>
                        <hr class="hr-clas-low" />
                        <div class="chat-box-online-left">
                        <button class="btn">
                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
                            -  Justine Goliyad
                            <br />
                            </button>
                        </div>
                        <hr class="hr-clas-low" />

                        <div class="chat-box-online-right">
                        <button class="btn">
                            <img src="http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0" alt="bootstrap Chat box user image" class="img-circle" />
                            -  Romin Royeelin
                            <br />
                            </button>
                        </div>
                        <hr class="hr-clas-low" />
                    </div>

                </div>

            </div>
            
        </div>
    </div>
    
</body>
<script type="text/javascript">
	function changeState(st)
	{
		if(st == false)
		{
			document.getElementById('state').className = "btn btn-primary btn-danger";
			document.getElementById('state').innerHTML = "Server is not available";
		}
		else
		{
			document.getElementById('state').className = "btn btn-primary btn-success";
			document.getElementById('state').innerHTML = "Server is available";
		}
	};
	function createMessage(msg,id,nickname)
	{
		k = document.createElement('div');
		k.id = id;
	    var a = document.createElement('div');
	    a.className = "chat-box-left";
	    a.innerHTML = msg;
	    addButtons(a,id);
	    k.appendChild(a);
	    
	    var b = document.createElement('div');
	    b.className = "chat-box-name-left";
	    var image = document.createElement('img');
	    image.src = "http://vladsokolovsky.com/forums/uploads/profile/photo-36.jpg?_r=0";
	    image.alt = "bootstrap Chat box user image";
	    image.className = "img-circle";
	    b.appendChild(image);
	    b.innerHTML += new Date().toLocaleString();
	    b.innerHTML += "- ";
	    b.innerHTML += nickname;
	    k.appendChild(b);

		var c = document.createElement('hr');
	    c.className = "hr-clas";                        
        k.appendChild(c);
        document.getElementById('message').value = "";

        document.getElementById('myChat').appendChild(k);
        document.getElementById('myChat').scrollTop = document.getElementById('myChat').scrollHeight;
	}
	function sendClick() {
		createMessage(document.getElementById('message').value, document.getElementById('kol').value, document.getElementById('nick').value);
		document.getElementById('kol').value = document.getElementById('kol').value + 1;
		$.ajax({
                        method: 'POST',
                        data: { message: "adsffs" }
        });
    };
    function deleteMessage(id)
    {
    	var b = document.getElementById('myChat');
    	(element = document.getElementById(id)).parentNode.removeChild(element);
    };
    function editMessage(id)
    {
    	var b = document.getElementById(id.slice(1));
    	(element = document.getElementById(id)).parentNode.removeChild(element);
    	var a = b.getElementsByClassName("chat-box-left")[0].innerHTML;
    	var message = a.slice(0,a.search('<'));
    	b.getElementsByClassName("chat-box-left")[0].innerHTML = "";
    	var input = document.createElement('input');
    	input.type = "text";
    	input.className = "form-control";
    	input.value = message.trim();
    	input.id = id;
    	var inpGr = document.createElement('input-group');
    	inpGr.appendChild(input);
    	var but = document.createElement('span');
    	but.className = "input-group-btn";
    	var butSave = document.createElement('button');
    	butSave.className = "btn btn-info";
    	butSave.value = "Save";
    	butSave.id = id;
    	butSave.innerHTML = "Save";
    	butSave.addEventListener("click", function(){ save(id); });
    	but.appendChild(butSave);
    	inpGr.appendChild(but);
    	b.getElementsByClassName("chat-box-left")[0].appendChild(inpGr);
    };
    function save(id)
    {
    	var b = document.getElementById(id.slice(1));
    	var t = b.getElementsByClassName("chat-box-left")[0];
    	var msg = t.getElementsByClassName("form-control")[0].value;
    	b.getElementsByClassName("chat-box-left")[0].innerHTML = msg;
    	addButtons(t, id.slice(1));
    };
    function addButtons(prev, id)
    {
	    var buttonRemove = document.createElement('button');
    	buttonRemove.className = "btn pull-right";
    	buttonRemove.id = id;
    	buttonRemove.style.marginTop= "-10px";
    	buttonRemove.addEventListener("click", function(){ deleteMessage(id); });
    	var but = document.createElement('span');
    	but.className = "glyphicon glyphicon-remove";
    	buttonRemove.appendChild(but);
    	prev.appendChild(buttonRemove);

    	var buttonEdit = document.createElement('button');
    	buttonEdit.className = "btn pull-right";
    	buttonEdit.id = 'd'+id;
    	buttonEdit.style.marginTop= "-10px";
    	buttonEdit.addEventListener("click", function(){ editMessage('d'+id); });
    	var but1 = document.createElement('span');
    	but1.className = "glyphicon glyphicon-pencil";
    	buttonEdit.appendChild(but1);
    	prev.appendChild(buttonEdit);

    };
</script>
</html>